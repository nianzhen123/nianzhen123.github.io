<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>springmvc步骤 | wangfeng</title>

  
  <meta name="author" content="wangfeng">
  

  
  <meta name="description" content="建一个springmvc的项目
在web.xml 文件里配置如下123456789&amp;lt;servlet&amp;gt;    &amp;lt;servlet-name&amp;gt;dispatcher&amp;lt;/servlet-name&amp;gt;    &amp;lt;servlet-class&amp;gt;org.springfram">
  

  
  
  <meta name="keywords" content="">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="springmvc步骤"/>

  <meta property="og:site_name" content="wangfeng"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="wangfeng" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">wangfeng</a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/archives">归档</a></li>
      
        <li><a href="/about">关于</a></li>
      
        <li><a href="/tools">网络工具</a></li>
      
        <li><a href="/share">资源共享</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>springmvc步骤</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2016/08/21/springmvc步骤/" rel="bookmark">
        <time class="entry-date published" datetime="2016-08-21T08:15:49.000Z">
          2016-08-21
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="建一个springmvc的项目"><a href="#建一个springmvc的项目" class="headerlink" title="建一个springmvc的项目"></a>建一个springmvc的项目</h2><ol>
<li>在web.xml 文件里配置如下<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;servlet&gt;</div><div class="line">    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;</div><div class="line">    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</div><div class="line">    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</div><div class="line">&lt;/servlet&gt;</div><div class="line">&lt;servlet-mapping&gt;</div><div class="line">    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;</div><div class="line">    &lt;url-pattern&gt;/&lt;/url-pattern&gt;</div><div class="line">&lt;/servlet-mapping&gt;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>注意：上面的servlet-name为dispatcher所有在web.xml的同目录下建立一个dispatcher-servlet.xml的文件，在这个文件文件里面配置springmvc的相关信息。</p>
<ol>
<li>dispatcher-servlet.xml文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;bean</div><div class="line">        class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;</div><div class="line">        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/views/&quot;&gt;&lt;/property&gt;</div><div class="line">        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;&gt;&lt;/property&gt;</div><div class="line">    &lt;/bean&gt;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>这段配置说明了访问视图的前缀和后缀<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;context:component-scan base-package=&quot;net.huaat.**.web&quot; /&gt;</div><div class="line">    &lt;mvc:annotation-driven&gt;&lt;/mvc:annotation-driven&gt;</div></pre></td></tr></table></figure></p>
<p>这一段说明用注解的方式来设置handlermapping,base-package这个属性说明了在那些包里扫描annotation</p>
<ol>
<li>然后就可以编写Controller<br>类似于以下这样的<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">@Controller</div><div class="line">@RequestMapping(&quot;policyrate&quot;)</div><div class="line">public class PolicyRateController &#123;</div><div class="line">    @Resource</div><div class="line">    DimensionService   dimensionService;</div><div class="line">    @Resource</div><div class="line">    PolicyRateService policyRateService;</div><div class="line">    @Autowired</div><div class="line">    HttpSession session;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>RequestMapping说明访问的 路径</p>
<ol>
<li>页面向后台传值<br>可以在参数里面加上@RequestParam(“username”)string username，但是这种方式如果没有参数的话会报500错误，即错误的访问地址。因为spring支持rest风格，这种方式会默认将username看成是地址的一部分，所以通常 的做法是不加RequestParam，直接写string username，这种方式要求参数和参数值是一致的，即都为username，上面那种方式，可以不一致。</li>
<li><p>将值从后台传到前台</p>
<ol>
<li>直接在方法的参数里加一个map,在map里设置值，就可以在前台读取了</li>
<li>不用map,用model，model.addattribute()</li>
</ol>
</li>
<li><p>比如说添加用户的页面，进这个页面的时候想给他一个新的user对象，有两种方式</p>
<ol>
<li>在方法的参数里写Model model，在方法里写 model.addattribute(new user())</li>
<li>在方法的参数里写@modelAttribute(“user”) User user<br>7.<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">@RequestMapping(value = &quot;/deleteRoleDataJSON/&#123;condition&#125;&quot;, method = RequestMethod.GET)</div><div class="line">public String deleteRoleDataJSON(@PathVariable(&quot;condition&quot;) String condition) &#123;</div><div class="line">    return null;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<p>对于这种路径里面有参数，在方法的参数里写上PathVariable</p>
<ol>
<li>想获得session，request.response，这些值，都是通过在方法参数里直接传入就可以使用</li>
<li>想上传文件，引入Apache的commons-fileupload包(主要是为了引用里面的FileUtils.copyInputStreamToFile(源文件，目标文件))，然后直接在方法的参数里加上multipartfile，然后在dispatcher-servlet.xml 文件里配置<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&gt;</div><div class="line">        &lt;property name=&quot;maxUploadSize&quot; value=&quot;500000&quot;&gt;&lt;/property&gt;</div><div class="line">    &lt;/bean&gt;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>必须配置这个，才能完成文件上传</p>
<ol>
<li>前面说的设置RequestMapping，都是对应到视图。现在大多使用ajax来获得数据，方法是直接在方法上加@ResponseBody这个注解就可以，加上之后，返回的数据就是json格式的 </li>
</ol>
<h3 id="在这里说一句，所谓的上传文件，其实就是，通过new-File-来得到一个新的路径，比如说xx-jpg-然后通过流的方式把上传的图片拷贝到刚刚new出来的那个文件里，"><a href="#在这里说一句，所谓的上传文件，其实就是，通过new-File-来得到一个新的路径，比如说xx-jpg-然后通过流的方式把上传的图片拷贝到刚刚new出来的那个文件里，" class="headerlink" title="在这里说一句，所谓的上传文件，其实就是，通过new File()来得到一个新的路径，比如说xx.jpg,然后通过流的方式把上传的图片拷贝到刚刚new出来的那个文件里，"></a>在这里说一句，所谓的上传文件，其实就是，通过new File()来得到一个新的路径，比如说xx.jpg,然后通过流的方式把上传的图片拷贝到刚刚new出来的那个文件里，</h3>
      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    

    </div>

    
  </div>
</article>

  



    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2016 wangfeng
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>